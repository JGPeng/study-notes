## HTTP
> **超文本传输协议，是一个基于请求与响应、**无状态的**、应用层的协议，常基于TCP/IP协议传输数据，是互联网上应用最为广泛的一种网络协议**，所有的WWW文件都必须遵守这个标准，设计HTTP的初衷是为了提供一种发布与接收HTML页面的方法。

风险：
+ 没有用户验证。
+ 没有验证报文的完整性。

+ 窃听风险（eavesdropping）：第三方可以获知通信内容。
+ 篡改风险（tampering）：第三方可以修改通信内容。
+ 冒充风险（pretending）：第三方可以冒充他人身份参与通信。

## HTTPS
> 超文本传输安全协议（Hypertext Transfer Protocol Secure），是身披SSL（Secure Sockets Layer）外壳的HTTP。**HTTPS是一种通过计算机网络进行安全通信的传输协议，经由HTTP进行通信，利用SSL/TLS（Transport Layer Security）建立全信道，加密数据包**。HTTPS使用的主要目的是提供网站服务器的身份认证，同时保护交换数据的隐私与完整性。

任务：

+ 加密：所有信息都是加密传播，第三方无法窃听。
+ 数据一致性：具有校验机制，一旦被篡改，通信双方会立刻发现。
+ 身份认证：配备身份证书，防止身份被冒充。

[分分钟让你理解HTTPS](https://juejin.cn/post/6844903599303032845)

[SSL/TLS协议运行机制的概述](http://ruanyifeng.com/blog/2014/02/ssl_tls.html)

SSL/TLS是介于HTTP和TCP之间的一层安全协议。

> TLS是SSL的后续版本，它们是用于在互联网两台计算机之间用于**身份验证**和**加密**的一种协议。

HTTPS协议的主要功能基本都依赖与SSL/TLS协议，SSL/TLS的功能实现主要依赖于三类基本算法：散列算法Hash、对称加密和非对称加密，其利用非对称加密实现身份认证和密钥协商，堆成加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。

首先客户端先向服务器端发送https请求，目的是获取服务器端的公钥，但由于直接发送公钥有可能被黑客截获，所以在这个过程中，服务器端的公钥由CA机构对该公钥进行加密（用的是CA机构自己的私钥CSK）生成一个license证书传给客户端，由于CA机构的所有公钥已被写死在客户端，因此客户端使用本地的CPK对license证书进行解密即可得到服务器端的公钥（解决了中间人问题，使用的确定是服务器端的公钥）。

然后客户端使用服务器端的公钥加密对称加密密钥（会话密钥），发送给服务器端，之后客户端和服务器端的对话都使用该会话密钥进行对称加密，从而双方就可以安全通信。

以上就是HTTPS非对称加密的过程。之后的数据传输就可以使用该公钥对数据进行对称加密。因此，一条安全的信道被建立起来了。详细过程如下：
1. 一开始客户端发送HTTPS请求的时候，请求报文包含：支持的SSL版本、非对称算法、随机数1；
2. 服务器端传回的报文包含：确定的SSL版本、对称算法、随机数2、证书；
3. 客户端进行证书认证
4. 客户端向服务器端发送报文：随机数3、X=hash(①②)
5. 服务器端验证：X==hash(①②) => 生成密钥K=f(随机数1、2、3)
6. 服务器端发送报文：Z=hash(①②④)
7. 客户端验证：Z==hash(①②④) => 生成密钥K=f(随机数1、2、3)
至此，不用在信道上传输公钥就可以由自己推出对称算法的密钥。
